ØªÙ…Ø§Ù…ØŒ Ù†Ø´ØªØºÙ„ Ø¹Ù„Ù‰ Ù†Øµ Ø§Ù„Ø³Ù„Ø§ÙŠØ¯Ø§Øª Ø§Ù„Ø¢Ù† ğŸ‘‡
(ÙƒÙ„Ù‘Ù‡ Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØŒ Ø¬Ø§Ù‡Ø² ØªØ­Ø·Ù‡ ÙÙŠ PowerPoint/Slides ÙƒÙˆØ¨ÙŠ-Ø¨ÙŠØ³Øª.)

---

## Slide 1 â€“ Title

**Bank / Alto CAP Pilot**
**From Outage + Disinformation â†’ Attested, Actionable Response**

Speaker cue: This is a concrete, runnable scenario from the CAP repo, not theory.

---

## Slide 2 â€“ The Live Incident Scenario

**Business situation**

* A **mobile banking outage** hits a major bank.
* Customers **canâ€™t access accounts** or complete transactions.
* At the same time, **social media is claiming â€œfunds are being stolenâ€**.
* Executives need **one place** that can:

  * Check what is actually deployed.
  * Verify integrity.
  * Pull the right policies.
  * Produce a **clear, defensible narrative** in minutes.

**Question**

> â€œIs this a real compromise, or just an outage being weaponized?â€

---

## Slide 3 â€“ What We Plug Into CAP (Inputs)

**Technical inputs**

1. **SBOM of the mobile banking app**

   * Format: SPDX JSON.
   * Includes build digest:

     * `sha256:1111â€¦` (demo value in script).
   * Ingested via `POST /v1/sbom/ingest`.

2. **GitHub Knowledge Base & Policies**

   * Repo: `asherxor/cap-bank-demo-kb@main`.
   * **KB path**: `kb/` (runbooks, playbooks, procedures).
   * **Policy path**: `policies/incident_response_policy.md`.
   * Ingested via:

     * `POST /v1/knowledge/artifacts/github/ingest`
     * `POST /v1/policies/github/ingest`.

3. **Org AI Agent (Incident Triage Agent)**

   * Registered via `POST /v1/ai/agents`.
   * Characteristics:

     * Uses **SBOM + attestations + KB + policies**.
     * Role: **incident triage for bank/Alto**.
     * Provider: current OpenAI backend (configurable).

4. **Auth & Tenant context**

   * Tenant admin:

     * `admin@cap.local` / `pass`.
   * Tenant ID resolved via:

     * `POST /auth/login` through the Gateway.

**Business context input**

* Scenario description sent to the agent:

> â€œWe have an ongoing mobile banking outage and social media claims that user funds are being stolen. Based on SBOM + attestations + KB + policies, provide a triage summary, risk assessment, and recommended actions.â€

---

## Slide 4 â€“ What CAP Actually Does (Pipeline)

This is exactly what the **`demo_full_scenario.win.ps1`** script runs end-to-end:

1. **Login & tenant selection**

   * Authenticates via Gateway.
   * Gets JWT + `tenant_id`.
   * Builds headers: `Authorization` + `x-tenant-id`.

2. **Software integrity chain**

   * `POST /v1/sbom/ingest`

     * Normalizes SBOM and assigns a **subject_id** for the mobile app.
   * `POST /v1/attestations`

     * Creates an **SBOM attestation** referencing that subject.
   * `POST /v1/attestations/{id}/submit`
   * `POST /v1/attestations/{id}/verify`

     * Moves attestation to **submitted** then **verified**.
   * `POST /v1/attestations/{id}/anchor`
   * `GET /v1/anchors/{anchor_id}/verify`

     * Anchors into the **local Canon Merkle ledger** and verifies:

       * `provider = "canon_local"`
       * `valid = true`.

3. **Knowledge + policy ingest**

   * Pulls content from `cap-bank-demo-kb`:

     * KB tree under `kb/` (limited to N files).
     * Policy file `policies/incident_response_policy.md`.
   * Confirms:

     * At least one **KB artifact**.
     * At least one **Policy**.
   * Extracts a **KB subject_id** used as the â€œknowledge subjectâ€ for the agent.

4. **Org Agent run (Incident Triage)**

   * Creates or reuses an agent:

     * Name: e.g. `incident_triage_agent`.
     * Tags: `demo`, `bank`, `alto`, `incident_triage`.
   * `POST /v1/ai/agents/{agent_id}/run` with:

     * The outage + disinformation prompt.
     * Context:

       * SBOM **subject_id**.
       * SBOM **attestation id**.
       * KB **subject_id**.
   * Receives:

     * A **run id**.
     * LLM output (triage narrative, risk assessment, recommended actions).

5. **Promotion to Evidence + Attestation**

   * `POST /v1/ai/runs/{run_id}/promote`

     * Creates:

       * **Evidence record** (`kind = ai_assessment`).
       * **Agent-run attestation** (`type = agent_run`).
     * Binds them to:

       * The KB subject.
       * The agent-run output.
       * The mobile appâ€™s SBOM/attestation context.

6. **Human-readable reports**

   * Writes out:

     * `docs/reports/incident_triage_YYYYMMDD_HHMMSS.md`
     * `docs/reports/incident_triage_YYYYMMDD_HHMMSS.json`
   * Contains:

     * Triage summary.
     * Risk classification.
     * Whatâ€™s known vs unknown.
     * Recommended next steps consistent with policy.

---

## Slide 5 â€“ What Comes Out (Outputs)

**Technical evidence outputs**

* **SBOM ingest result**

  * `subject_id` for the mobile banking app.
  * `normalized_hash` for consistent comparison.

* **SBOM attestation**

  * Status: `verified`.
  * Contains:

    * Subject link.
    * Statement metadata.
    * Reference hashes.

* **Ledger anchors**

  * At least one anchor:

    * `provider = "canon_local"`.
    * `block_index`, `root_hash`.
    * Independently verifiable via `/v1/anchors/{anchor_id}/verify`.

* **AI Evidence & Attestation**

  * Evidence record:

    * `kind = ai_assessment`.
    * Source: `agent_run`.
    * Metadata:

      * `agent_id`, `run_id`.
      * Input text.
      * Summary + tags.
  * Agent-run attestation:

    * `type = agent_run`.
    * Linked to KB subject + SBOM context.

**Human-facing outputs**

1. **Incident Triage Report (Markdown + JSON)**

   * Path:

     * `docs/reports/incident_triage_...md/json`
   * Includes:

     * Executive-level triage summary.
     * Structured risk assessment.
     * Actionable recommendations.
     * Pointers back to the underlying evidence/attestations.

2. **Optional KB Audit Report (from `demo_kb_audit.win.ps1`)**

   * Path:

     * `docs/reports/kb_audit_...md/json`
   * Shows:

     * What frameworks/policies are covered.
     * Gaps and suggested additions for the bank/Alto scenario.

**Business answer**

> â€œWe can show, with an evidence trail, that:
>
> * The deployed mobile app was integrity-checked and anchored.
> * Triage used the right KB + policy set.
> * The final narrative and recommendations are backed by signed, traceable artifacts.â€

---

## Slide 6 â€“ How the Bank/Alto Team Runs It

**1) Quick health check**

```powershell
pwsh -ExecutionPolicy Bypass -File .\scripts\demo_repo_health.win.ps1
```

* Confirms:

  * Core API and Gateway reachable.
  * Login works (tenant OK).
  * KB + policies exist.
  * AI agents configured.

**2) KB/Policy audit (optional but recommended)**

```powershell
pwsh -ExecutionPolicy Bypass -File .\scripts\demo_kb_audit.win.ps1
```

* Produces:

  * `docs/reports/kb_audit_*.md`
  * `docs/reports/kb_audit_*.json`

**3) Full incident scenario (bank outage + disinformation)**

```powershell
pwsh -ExecutionPolicy Bypass -File .\scripts\demo_full_scenario.win.ps1 `
  -CoreBase "http://127.0.0.1:8100" `
  -GatewayBase "http://localhost:4000" `
  -DemoOwner "asherxor" `
  -DemoRepo "cap-bank-demo-kb" `
  -DemoRef "main"
```

* End state:

  * âœ… SBOM â†’ Attestation â†’ Local Canon Anchor.
  * âœ… KB + policy ingested and bound.
  * âœ… Org agent run for incident triage.
  * âœ… Evidence + agent attestation created.
  * âœ… Incident triage report written under `docs/reports/`.

---

Ù„Ùˆ Ø­Ø§Ø¨ØŒ ÙÙŠ Ø§Ù„Ø®Ø·ÙˆØ© Ø§Ù„Ø¬Ø§ÙŠØ© Ø£Ù‚Ø¯Ø±:

* Ø¥Ù…Ù‘Ø§ Ø£ÙƒØªØ¨ Ù„Ùƒ **Ù†Øµ Ø§Ù„Ù€ triage report** ÙƒØ³Ù„Ø§ÙŠØ¯ÙŠÙ† (ready to paste),
* Ø£Ùˆ Ø£Ø¹Ù…Ù„ **Ù†Ø³Ø®Ø© Ù…Ø®ØªØµØ±Ø© â€œone-pagerâ€** Ù…Ù† Ù‡Ø°Ø§ Ø§Ù„Ù€ use case ØªØ³ØªØ®Ø¯Ù…Ù‡Ø§ ÙƒØ¨Ø±ÙˆØ´ÙˆØ± Ù„Ù„Ø¨Ù†Ùƒ/Alto.
